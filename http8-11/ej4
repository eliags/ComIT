/* 4) Como el ejercicio anterior, solo que ahora debe responder con un JSON { "respuesta": "mundo" }.
Usar la función JSON.stringify(objeto) para enviar la respuesta como texto. */

var http = require("http");
var URL = require("url");
var json = require('./rta.json');

var host = "127.0.0.1"
var port = 3000

var server = http.createServer(function(req, res) {
    if (req.method !== "GET") {
        res.statusCode = 401
        res.end("Error: se esperaba una conexión GET\n")
    }

    var objetoUrl = URL.parse(req.url)
    if (objetoUrl.pathname === "/hola") {
        var respuesta = JSON.stringify(json);
        res.statusCode = 200
        res.setHeader("Content-Type", "application/json")
        res.end(respuesta)
    } else {
        res.statusCode = 404
        res.end("Error: endpoint no encontrado\n")
    }
})

server.listen(port, host, function() {
    console.log(`Servidor escuchando en http://${host}:${port}/`)
})